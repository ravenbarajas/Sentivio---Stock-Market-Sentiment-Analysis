{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\StockSentimentAnalysis\\\\frontend\\\\src\\\\components\\\\StockChart.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend } from 'chart.js';\nimport { Line } from 'react-chartjs-2';\nimport { useTheme } from './ui/ThemeProvider';\n\n// Register ChartJS components\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\nconst StockChart = () => {\n  _s();\n  const [symbol, setSymbol] = useState('');\n  const [marketData, setMarketData] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const {\n    theme\n  } = useTheme();\n\n  // New state for selected data point\n  const [selectedDateData, setSelectedDateData] = useState(null);\n\n  // Popular stocks for quick selection\n  const popularStocks = [{\n    symbol: 'AAPL',\n    name: 'Apple'\n  }, {\n    symbol: 'MSFT',\n    name: 'Microsoft'\n  }, {\n    symbol: 'GOOGL',\n    name: 'Google'\n  }, {\n    symbol: 'AMZN',\n    name: 'Amazon'\n  }, {\n    symbol: 'TSLA',\n    name: 'Tesla'\n  }];\n  const [popularStockDetails, setPopularStockDetails] = useState([]);\n  const [popularStocksLoading, setPopularStocksLoading] = useState(false);\n  const [popularStocksError, setPopularStocksError] = useState(null);\n\n  // Determine if using dark mode\n  const isDarkMode = theme === 'dark' || theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches;\n\n  // Theme-based colors\n  const colors = {\n    text: isDarkMode ? '#e4e4e7' : '#212529',\n    mutedText: isDarkMode ? '#a1a1aa' : '#6c757d',\n    background: isDarkMode ? '#18181b' : '#fff',\n    cardBackground: isDarkMode ? '#1a1a1a' : '#fff',\n    cardHeaderBackground: isDarkMode ? '#1a1a1a' : '#f8f9fa',\n    border: isDarkMode ? '#3f3f46' : '#e9ecef',\n    primary: '#007bff',\n    primaryDark: '#0056b3',\n    buttonText: '#fff',\n    dangerText: isDarkMode ? '#f87171' : '#dc3545',\n    successText: isDarkMode ? '#4ade80' : '#198754',\n    chartClose: '#28a745',\n    chartOpen: '#007bff',\n    chartHigh: '#ffc107',\n    chartLow: '#dc3545'\n  };\n  useEffect(() => {\n    const fetchPopularStockDetails = async () => {\n      setPopularStocksLoading(true);\n      setPopularStocksError(null);\n      const detailsPromises = popularStocks.map(async stock => {\n        try {\n          const response = await axios.get(`/api/stock-data/${stock.symbol.toUpperCase()}`);\n          if (response.data && response.data.data && response.data.data.length > 0) {\n            const stockData = response.data.data;\n            const latestEntry = stockData[stockData.length - 1];\n            const currentPrice = parseFloat(latestEntry.close);\n            let change = null;\n            let percentChange = null;\n            let isPositive = null;\n            if (stockData.length > 1) {\n              const previousEntry = stockData[stockData.length - 2];\n              const previousClose = parseFloat(previousEntry.close);\n              if (previousClose !== 0) {\n                change = currentPrice - previousClose;\n                percentChange = change / previousClose * 100;\n              }\n            } else if (stockData.length === 1) {\n              const openPrice = parseFloat(latestEntry.open);\n              if (latestEntry.open !== undefined && openPrice !== 0) {\n                change = currentPrice - openPrice;\n                percentChange = change / openPrice * 100;\n              }\n            }\n            if (change !== null) {\n              isPositive = change >= 0;\n            }\n            return {\n              ...stock,\n              currentPrice,\n              change,\n              percentChange,\n              isPositive,\n              error: false\n            };\n          } else {\n            return {\n              ...stock,\n              currentPrice: null,\n              change: null,\n              percentChange: null,\n              error: 'No data returned'\n            };\n          }\n        } catch (err) {\n          console.error(`Failed to fetch data for ${stock.symbol}`, err);\n          return {\n            ...stock,\n            currentPrice: null,\n            change: null,\n            percentChange: null,\n            error: true\n          };\n        }\n      });\n      const results = await Promise.all(detailsPromises);\n      setPopularStockDetails(results);\n      setPopularStocksLoading(false);\n    };\n    fetchPopularStockDetails();\n  }, []); // `popularStocks` is stable, so run once on mount.\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!symbol.trim()) {\n      setError('Please enter a stock symbol');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.get(`/api/stock-data/${symbol.toUpperCase()}`);\n      setMarketData(response.data);\n      // Initialize selected data to the latest data point\n      if (response.data && response.data.data && response.data.data.length > 0) {\n        setSelectedDateData(response.data.data[response.data.data.length - 1]);\n      } else {\n        setSelectedDateData(null);\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error fetching stock data:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to fetch stock data');\n      setMarketData(null);\n      setSelectedDateData(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const chartData = marketData ? {\n    labels: marketData.data.map(item => item.date),\n    datasets: [{\n      label: 'Close Price',\n      data: marketData.data.map(item => item.close),\n      borderColor: colors.chartClose,\n      backgroundColor: 'rgba(40, 167, 69, 0.1)',\n      borderWidth: 0.5,\n      tension: 0.1,\n      pointRadius: 0\n    }, {\n      label: 'Open Price',\n      data: marketData.data.map(item => item.open),\n      borderColor: colors.chartOpen,\n      backgroundColor: 'rgba(0, 123, 255, 0.1)',\n      borderWidth: 0.5,\n      tension: 0.1,\n      pointRadius: 0\n    }, {\n      label: 'High',\n      data: marketData.data.map(item => item.high),\n      borderColor: colors.chartHigh,\n      backgroundColor: 'rgba(255, 193, 7, 0.1)',\n      borderWidth: 0.5,\n      tension: 0.1,\n      hidden: true,\n      pointRadius: 0\n    }, {\n      label: 'Low',\n      data: marketData.data.map(item => item.low),\n      borderColor: colors.chartLow,\n      backgroundColor: 'rgba(220, 53, 69, 0.1)',\n      borderWidth: 0.5,\n      tension: 0.1,\n      hidden: true,\n      pointRadius: 0\n    }]\n  } : null;\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top',\n        labels: {\n          color: colors.text\n        }\n      },\n      title: {\n        display: true,\n        text: marketData ? `${marketData.symbol} Price History` : 'Stock Price History',\n        color: colors.text\n      },\n      tooltip: {\n        callbacks: {\n          label: function (context) {\n            const label = context.dataset.label || '';\n            const value = context.parsed.y || 0;\n            return `${label}: $${value.toFixed(2)}`;\n          }\n        }\n      }\n    },\n    scales: {\n      y: {\n        title: {\n          display: true,\n          text: 'Price ($)',\n          color: colors.text\n        },\n        ticks: {\n          callback: function (value) {\n            return '$' + value.toFixed(2);\n          },\n          color: colors.text\n        },\n        grid: {\n          color: colors.border\n        }\n      },\n      x: {\n        title: {\n          display: true,\n          text: 'Date',\n          color: colors.text\n        },\n        ticks: {\n          color: colors.text\n        },\n        grid: {\n          color: colors.border\n        }\n      }\n    },\n    onClick: (event, elements) => {\n      if (elements.length > 0) {\n        const dataIndex = elements[0].index;\n        const datasetIndex = elements[0].datasetIndex;\n        // We are interested in the data from the 'Close Price' dataset (datasetIndex 0)\n        if (datasetIndex === 0 && marketData && marketData.data) {\n          const clickedData = marketData.data[dataIndex];\n          setSelectedDateData(clickedData);\n        }\n      }\n    }\n  };\n  const handleQuickSelect = stockSymbol => {\n    setSymbol(stockSymbol);\n    // Submit the form programmatically\n    handleSubmitWithSymbol(stockSymbol);\n  };\n  const handleSubmitWithSymbol = async stockSymbol => {\n    if (!stockSymbol.trim()) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await axios.get(`/api/stock-data/${stockSymbol.toUpperCase()}`);\n      setMarketData(response.data);\n      // Initialize selected data to the latest data point\n      if (response.data && response.data.data && response.data.data.length > 0) {\n        setSelectedDateData(response.data.data[response.data.data.length - 1]);\n      } else {\n        setSelectedDateData(null);\n      }\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('Error fetching stock data:', err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Failed to fetch stock data');\n      setMarketData(null);\n      setSelectedDateData(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Helper function to calculate price change for a specific date relative to the previous day\n  const calculateDailyChange = (selectedData, allData) => {\n    if (!selectedData || !allData || allData.length < 2) return null; // Need at least 2 data points to calculate a change\n\n    const selectedIndex = allData.findIndex(item => item.date === selectedData.date);\n    if (selectedIndex <= 0) return null; // Cannot calculate change if it's the first day or data not found\n\n    const previousDayData = allData[selectedIndex - 1];\n    const currentPrice = parseFloat(selectedData.close);\n    const previousClose = parseFloat(previousDayData.close);\n    if (previousClose === 0) return null; // Avoid division by zero\n\n    const change = currentPrice - previousClose;\n    const percentChange = change / previousClose * 100;\n    const isPositive = change >= 0;\n    return {\n      change,\n      percentChange,\n      isPositive\n    };\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\n      color: colors.text,\n      backgroundColor: 'transparent'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        borderRadius: '8px',\n        boxShadow: isDarkMode ? '0 1px 3px rgba(0,0,0,0.3)' : '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)',\n        overflow: 'hidden',\n        marginBottom: '1rem',\n        backgroundColor: colors.background\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '1rem',\n          borderBottom: `1px solid ${colors.border}`,\n          backgroundColor: colors.cardHeaderBackground\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 0 0',\n            fontSize: '1.5rem',\n            fontWeight: '600',\n            color: colors.text\n          },\n          children: \"Popular Stocks\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0',\n            fontSize: '0.875rem',\n            color: colors.mutedText\n          },\n          children: \"Quick select or view summary data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '1rem',\n          backgroundColor: colors.cardBackground\n        },\n        children: [popularStocksLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: colors.mutedText\n          },\n          children: \"Loading popular stock summaries...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 36\n        }, this), popularStocksError && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: colors.dangerText\n          },\n          children: popularStocksError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 34\n        }, this), !popularStocksLoading && !popularStocksError && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fill, minmax(180px, 1fr))',\n            gap: '1rem'\n          },\n          children: popularStockDetails.map(detail => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleQuickSelect(detail.symbol),\n            disabled: loading // Disable if main chart is loading\n            ,\n            style: {\n              padding: '1rem',\n              border: `1px solid ${colors.border}`,\n              borderRadius: '8px',\n              backgroundColor: colors.cardBackground,\n              textAlign: 'left',\n              cursor: loading ? 'not-allowed' : 'pointer',\n              opacity: loading ? '0.65' : '1',\n              boxShadow: isDarkMode ? '0 2px 4px rgba(0,0,0,0.25)' : '0 2px 4px rgba(0,0,0,0.1)',\n              transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n              display: 'flex',\n              flexDirection: 'column',\n              justifyContent: 'space-between',\n              minHeight: '100px' // Ensure cards have a consistent minimum height\n            },\n            onMouseOver: e => {\n              if (!loading) {\n                e.currentTarget.style.transform = 'translateY(-3px)';\n                e.currentTarget.style.boxShadow = isDarkMode ? '0 5px 10px rgba(0,0,0,0.35)' : '0 5px 10px rgba(0,0,0,0.15)';\n              }\n            },\n            onMouseOut: e => {\n              e.currentTarget.style.transform = 'none';\n              e.currentTarget.style.boxShadow = isDarkMode ? '0 2px 4px rgba(0,0,0,0.25)' : '0 2px 4px rgba(0,0,0,0.1)';\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.8rem',\n                  color: colors.mutedText,\n                  marginBottom: '0.25rem'\n                },\n                children: detail.symbol\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '1rem',\n                  fontWeight: '600',\n                  color: colors.text,\n                  marginBottom: '0.35rem',\n                  whiteSpace: 'nowrap',\n                  overflow: 'hidden',\n                  textOverflow: 'ellipsis'\n                },\n                children: detail.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 19\n            }, this), detail.error === true && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8rem',\n                color: colors.dangerText,\n                marginTop: 'auto'\n              },\n              children: \"Error loading data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 45\n            }, this), typeof detail.error === 'string' && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8rem',\n                color: colors.mutedText,\n                marginTop: 'auto'\n              },\n              children: detail.error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 56\n            }, this), !detail.error && detail.currentPrice !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginTop: 'auto'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '1.1rem',\n                  fontWeight: 'bold',\n                  color: colors.text,\n                  marginBottom: '0.25rem'\n                },\n                children: [\"$\", detail.currentPrice.toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 23\n              }, this), detail.change !== null && detail.percentChange !== null && detail.isPositive !== null ? /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.8rem',\n                  fontWeight: 500,\n                  color: detail.isPositive ? colors.successText : colors.dangerText\n                },\n                children: [detail.isPositive ? '▲' : '▼', \" \", Math.abs(detail.change).toFixed(2), \" (\", Math.abs(detail.percentChange).toFixed(2), \"%)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '0.8rem',\n                  color: colors.mutedText\n                },\n                children: \"N/A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 419,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 21\n            }, this), !detail.error && detail.currentPrice === null && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '0.8rem',\n                color: colors.mutedText,\n                marginTop: 'auto'\n              },\n              children: \"Data unavailable\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 70\n            }, this)]\n          }, detail.symbol, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        borderRadius: '8px',\n        boxShadow: isDarkMode ? '0 1px 3px rgba(0,0,0,0.3)' : '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)',\n        overflow: 'hidden',\n        marginBottom: '1rem',\n        backgroundColor: colors.background\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '1rem',\n          borderBottom: `1px solid ${colors.border}`,\n          backgroundColor: colors.cardHeaderBackground\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            margin: '0 0 0 0',\n            fontSize: '1.5rem',\n            fontWeight: '600',\n            color: colors.text\n          },\n          children: \"Stock Market Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0',\n            fontSize: '0.875rem',\n            color: colors.mutedText\n          },\n          children: \"Enter a symbol to view historical market data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '1rem',\n          backgroundColor: colors.cardBackground\n          // Removed flex and gap from here, children will stack naturally\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          style: {\n            display: 'flex',\n            gap: '0.5rem',\n            marginBottom: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Enter stock symbol (e.g., AAPL)\",\n            value: symbol,\n            onChange: e => setSymbol(e.target.value),\n            style: {\n              flex: '1',\n              padding: '0.5rem 0.75rem',\n              fontSize: '1rem',\n              borderRadius: '4px',\n              border: `1px solid ${colors.border}`,\n              outline: 'none',\n              backgroundColor: isDarkMode ? '#3f3f46' : '#fff',\n              color: colors.text\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            style: {\n              padding: '0.5rem 1rem',\n              backgroundColor: loading ? isDarkMode ? '#52525b' : '#6c757d' : colors.primary,\n              color: colors.buttonText,\n              border: 'none',\n              borderRadius: '4px',\n              fontSize: '1rem',\n              cursor: loading ? 'not-allowed' : 'pointer',\n              opacity: loading ? '0.65' : '1'\n            },\n            disabled: loading,\n            children: loading ? 'Loading...' : 'Get Data'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: isDarkMode ? 'rgba(248, 113, 113, 0.1)' : 'rgba(239, 68, 68, 0.1)',\n            color: colors.dangerText,\n            borderRadius: '4px',\n            padding: '0.75rem 1rem',\n            marginBottom: '1rem'\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 13\n        }, this), marketData && marketData.data && marketData.data.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            // Arrange children (chart and data) in a row\n            width: '100%' // Ensure this container takes full width of parent\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '80%',\n              flex: '0 0 80%'\n            },\n            children: /*#__PURE__*/_jsxDEV(Line, {\n              data: chartData,\n              options: chartOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 15\n          }, this), selectedDateData && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '20%',\n              flex: '0 0 20%',\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '0.5rem',\n              padding: '0 0 0 1rem',\n              // Add padding on the left to separate from chart\n              height: '100%' // Maximize height\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: '0 0 0.5rem 0',\n                fontSize: '1rem',\n                fontWeight: '600',\n                color: colors.text\n              },\n              children: [\"Latest Data (\", selectedDateData.date, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 19\n            }, this), selectedDateData && marketData && marketData.data && calculateDailyChange(selectedDateData, marketData.data) && (() => {\n              const dailyChange = calculateDailyChange(selectedDateData, marketData.data);\n              if (!dailyChange) return null; // Ensure dailyChange is valid before rendering\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  textAlign: 'center',\n                  marginBottom: '1rem' // Keep some margin below the change\n                  // Removed background and padding styles that were for the standalone card\n                },\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    display: 'inline-block',\n                    padding: '0.5rem 1rem',\n                    borderRadius: '4px',\n                    backgroundColor: dailyChange.isPositive ? isDarkMode ? 'rgba(74, 222, 128, 0.1)' : 'rgba(34, 197, 94, 0.1)' : isDarkMode ? 'rgba(248, 113, 113, 0.1)' : 'rgba(239, 68, 68, 0.1)',\n                    color: dailyChange.isPositive ? colors.successText : colors.dangerText,\n                    fontWeight: 500\n                  },\n                  children: [dailyChange.isPositive ? '↑' : '↓', \" $\", Math.abs(dailyChange.change).toFixed(2), \" (\", dailyChange.percentChange.toFixed(2), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 560,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 555,\n                columnNumber: 25\n              }, this);\n            })(), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                flexDirection: 'column',\n                gap: '0.5rem',\n                overflowY: 'auto'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  borderRadius: '4px',\n                  backgroundColor: colors.cardBackground,\n                  border: `1px solid ${colors.border}`,\n                  padding: '0.4rem 0.6rem',\n                  textAlign: 'center',\n                  flex: '0 0 auto',\n                  minWidth: 'auto',\n                  width: '100%'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    color: colors.mutedText,\n                    marginBottom: '0.1rem'\n                  },\n                  children: \"Open\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 595,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '1rem',\n                    fontWeight: 600,\n                    color: colors.text\n                  },\n                  children: [\"$\", Number(selectedDateData.open).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 585,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  borderRadius: '4px',\n                  backgroundColor: colors.cardBackground,\n                  border: `1px solid ${colors.border}`,\n                  padding: '0.4rem 0.6rem',\n                  textAlign: 'center',\n                  flex: '0 0 auto',\n                  minWidth: 'auto',\n                  width: '100%'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    color: colors.mutedText,\n                    marginBottom: '0.1rem'\n                  },\n                  children: \"Close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 609,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '1rem',\n                    fontWeight: 600,\n                    color: colors.text\n                  },\n                  children: [\"$\", Number(selectedDateData.close).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 610,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 599,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  borderRadius: '4px',\n                  backgroundColor: colors.cardBackground,\n                  border: `1px solid ${colors.border}`,\n                  padding: '0.4rem 0.6rem',\n                  textAlign: 'center',\n                  flex: '0 0 auto',\n                  minWidth: 'auto',\n                  width: '100%'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    color: colors.mutedText,\n                    marginBottom: '0.1rem'\n                  },\n                  children: \"High\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 623,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '1rem',\n                    fontWeight: 600,\n                    color: colors.text\n                  },\n                  children: [\"$\", Number(selectedDateData.high).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 624,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  borderRadius: '4px',\n                  backgroundColor: colors.cardBackground,\n                  border: `1px solid ${colors.border}`,\n                  padding: '0.4rem 0.6rem',\n                  textAlign: 'center',\n                  flex: '0 0 auto',\n                  minWidth: 'auto',\n                  width: '100%'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    color: colors.mutedText,\n                    marginBottom: '0.1rem'\n                  },\n                  children: \"Low\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 637,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '1rem',\n                    fontWeight: 600,\n                    color: colors.text\n                  },\n                  children: [\"$\", Number(selectedDateData.low).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 627,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  borderRadius: '4px',\n                  backgroundColor: colors.cardBackground,\n                  border: `1px solid ${colors.border}`,\n                  padding: '0.4rem 0.6rem',\n                  textAlign: 'center',\n                  flex: '0 0 auto',\n                  minWidth: 'auto',\n                  width: '100%'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '0.75rem',\n                    color: colors.mutedText,\n                    marginBottom: '0.1rem'\n                  },\n                  children: \"Volume\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 651,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '1rem',\n                    fontWeight: 600,\n                    color: colors.text\n                  },\n                  children: Number(selectedDateData.volume).toLocaleString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 652,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 329,\n    columnNumber: 5\n  }, this);\n};\n_s(StockChart, \"YUC/a5MeDQcPUYyaVl3EL8S2QjA=\", false, function () {\n  return [useTheme];\n});\n_c = StockChart;\nexport default StockChart;\nvar _c;\n$RefreshReg$(_c, \"StockChart\");","map":{"version":3,"names":["React","useState","useEffect","axios","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Line","useTheme","jsxDEV","_jsxDEV","register","StockChart","_s","symbol","setSymbol","marketData","setMarketData","loading","setLoading","error","setError","theme","selectedDateData","setSelectedDateData","popularStocks","name","popularStockDetails","setPopularStockDetails","popularStocksLoading","setPopularStocksLoading","popularStocksError","setPopularStocksError","isDarkMode","window","matchMedia","matches","colors","text","mutedText","background","cardBackground","cardHeaderBackground","border","primary","primaryDark","buttonText","dangerText","successText","chartClose","chartOpen","chartHigh","chartLow","fetchPopularStockDetails","detailsPromises","map","stock","response","get","toUpperCase","data","length","stockData","latestEntry","currentPrice","parseFloat","close","change","percentChange","isPositive","previousEntry","previousClose","openPrice","open","undefined","err","console","results","Promise","all","handleSubmit","e","preventDefault","trim","_err$response","_err$response$data","chartData","labels","item","date","datasets","label","borderColor","backgroundColor","borderWidth","tension","pointRadius","high","hidden","low","chartOptions","responsive","plugins","legend","position","color","title","display","tooltip","callbacks","context","dataset","value","parsed","y","toFixed","scales","ticks","callback","grid","x","onClick","event","elements","dataIndex","index","datasetIndex","clickedData","handleQuickSelect","stockSymbol","handleSubmitWithSymbol","_err$response2","_err$response2$data","calculateDailyChange","selectedData","allData","selectedIndex","findIndex","previousDayData","style","padding","fontFamily","children","borderRadius","boxShadow","overflow","marginBottom","borderBottom","margin","fontSize","fontWeight","fileName","_jsxFileName","lineNumber","columnNumber","gridTemplateColumns","gap","detail","disabled","textAlign","cursor","opacity","transition","flexDirection","justifyContent","minHeight","onMouseOver","currentTarget","transform","onMouseOut","whiteSpace","textOverflow","marginTop","Math","abs","onSubmit","type","placeholder","onChange","target","flex","outline","width","options","height","dailyChange","overflowY","minWidth","Number","volume","toLocaleString","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/StockSentimentAnalysis/frontend/src/components/StockChart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\nimport { Line } from 'react-chartjs-2';\r\nimport { useTheme } from './ui/ThemeProvider';\r\n\r\n// Register ChartJS components\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nconst StockChart = () => {\r\n  const [symbol, setSymbol] = useState('');\r\n  const [marketData, setMarketData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const { theme } = useTheme();\r\n  \r\n  // New state for selected data point\r\n  const [selectedDateData, setSelectedDateData] = useState(null);\r\n  \r\n  // Popular stocks for quick selection\r\n  const popularStocks = [\r\n    { symbol: 'AAPL', name: 'Apple' },\r\n    { symbol: 'MSFT', name: 'Microsoft' },\r\n    { symbol: 'GOOGL', name: 'Google' },\r\n    { symbol: 'AMZN', name: 'Amazon' },\r\n    { symbol: 'TSLA', name: 'Tesla' },\r\n  ];\r\n\r\n  const [popularStockDetails, setPopularStockDetails] = useState([]);\r\n  const [popularStocksLoading, setPopularStocksLoading] = useState(false);\r\n  const [popularStocksError, setPopularStocksError] = useState(null);\r\n  \r\n  // Determine if using dark mode\r\n  const isDarkMode = theme === 'dark' || (theme === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches);\r\n  \r\n  // Theme-based colors\r\n  const colors = {\r\n    text: isDarkMode ? '#e4e4e7' : '#212529',\r\n    mutedText: isDarkMode ? '#a1a1aa' : '#6c757d',\r\n    background: isDarkMode ? '#18181b' : '#fff',\r\n    cardBackground: isDarkMode ? '#1a1a1a' : '#fff',\r\n    cardHeaderBackground: isDarkMode ? '#1a1a1a' : '#f8f9fa',\r\n    border: isDarkMode ? '#3f3f46' : '#e9ecef',\r\n    primary: '#007bff',\r\n    primaryDark: '#0056b3',\r\n    buttonText: '#fff',\r\n    dangerText: isDarkMode ? '#f87171' : '#dc3545',\r\n    successText: isDarkMode ? '#4ade80' : '#198754',\r\n    chartClose: '#28a745',\r\n    chartOpen: '#007bff',\r\n    chartHigh: '#ffc107',\r\n    chartLow: '#dc3545',\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchPopularStockDetails = async () => {\r\n      setPopularStocksLoading(true);\r\n      setPopularStocksError(null);\r\n      const detailsPromises = popularStocks.map(async (stock) => {\r\n        try {\r\n          const response = await axios.get(`/api/stock-data/${stock.symbol.toUpperCase()}`);\r\n          if (response.data && response.data.data && response.data.data.length > 0) {\r\n            const stockData = response.data.data;\r\n            const latestEntry = stockData[stockData.length - 1];\r\n            const currentPrice = parseFloat(latestEntry.close);\r\n            let change = null;\r\n            let percentChange = null;\r\n            let isPositive = null;\r\n\r\n            if (stockData.length > 1) {\r\n              const previousEntry = stockData[stockData.length - 2];\r\n              const previousClose = parseFloat(previousEntry.close);\r\n              if (previousClose !== 0) {\r\n                change = currentPrice - previousClose;\r\n                percentChange = (change / previousClose) * 100;\r\n              }\r\n            } else if (stockData.length === 1) {\r\n              const openPrice = parseFloat(latestEntry.open);\r\n              if (latestEntry.open !== undefined && openPrice !== 0) {\r\n                change = currentPrice - openPrice;\r\n                percentChange = (change / openPrice) * 100;\r\n              }\r\n            }\r\n            \r\n            if (change !== null) {\r\n              isPositive = change >= 0;\r\n            }\r\n\r\n            return {\r\n              ...stock,\r\n              currentPrice,\r\n              change,\r\n              percentChange,\r\n              isPositive,\r\n              error: false,\r\n            };\r\n          } else {\r\n            return { ...stock, currentPrice: null, change: null, percentChange: null, error: 'No data returned' };\r\n          }\r\n        } catch (err) {\r\n          console.error(`Failed to fetch data for ${stock.symbol}`, err);\r\n          return { ...stock, currentPrice: null, change: null, percentChange: null, error: true };\r\n        }\r\n      });\r\n      \r\n      const results = await Promise.all(detailsPromises);\r\n      setPopularStockDetails(results);\r\n      setPopularStocksLoading(false);\r\n    };\r\n\r\n    fetchPopularStockDetails();\r\n  }, []); // `popularStocks` is stable, so run once on mount.\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!symbol.trim()) {\r\n      setError('Please enter a stock symbol');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.get(`/api/stock-data/${symbol.toUpperCase()}`);\r\n      setMarketData(response.data);\r\n      // Initialize selected data to the latest data point\r\n      if (response.data && response.data.data && response.data.data.length > 0) {\r\n        setSelectedDateData(response.data.data[response.data.data.length - 1]);\r\n      } else {\r\n        setSelectedDateData(null);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching stock data:', err);\r\n      setError(err.response?.data?.error || 'Failed to fetch stock data');\r\n      setMarketData(null);\r\n      setSelectedDateData(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const chartData = marketData ? {\r\n    labels: marketData.data.map(item => item.date),\r\n    datasets: [\r\n      {\r\n        label: 'Close Price',\r\n        data: marketData.data.map(item => item.close),\r\n        borderColor: colors.chartClose,\r\n        backgroundColor: 'rgba(40, 167, 69, 0.1)',\r\n        borderWidth: 0.5,\r\n        tension: 0.1,\r\n        pointRadius: 0,\r\n      },\r\n      {\r\n        label: 'Open Price',\r\n        data: marketData.data.map(item => item.open),\r\n        borderColor: colors.chartOpen,\r\n        backgroundColor: 'rgba(0, 123, 255, 0.1)',\r\n        borderWidth: 0.5,\r\n        tension: 0.1,\r\n        pointRadius: 0,\r\n      },\r\n      {\r\n        label: 'High',\r\n        data: marketData.data.map(item => item.high),\r\n        borderColor: colors.chartHigh,\r\n        backgroundColor: 'rgba(255, 193, 7, 0.1)',\r\n        borderWidth: 0.5,\r\n        tension: 0.1,\r\n        hidden: true,\r\n        pointRadius: 0,\r\n      },\r\n      {\r\n        label: 'Low',\r\n        data: marketData.data.map(item => item.low),\r\n        borderColor: colors.chartLow,\r\n        backgroundColor: 'rgba(220, 53, 69, 0.1)',\r\n        borderWidth: 0.5,\r\n        tension: 0.1,\r\n        hidden: true,\r\n        pointRadius: 0,\r\n      }\r\n    ],\r\n  } : null;\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n        labels: {\r\n          color: colors.text\r\n        }\r\n      },\r\n      title: {\r\n        display: true,\r\n        text: marketData ? `${marketData.symbol} Price History` : 'Stock Price History',\r\n        color: colors.text\r\n      },\r\n      tooltip: {\r\n        callbacks: {\r\n          label: function(context) {\r\n            const label = context.dataset.label || '';\r\n            const value = context.parsed.y || 0;\r\n            return `${label}: $${value.toFixed(2)}`;\r\n          }\r\n        }\r\n      }\r\n    },\r\n    scales: {\r\n      y: {\r\n        title: {\r\n          display: true,\r\n          text: 'Price ($)',\r\n          color: colors.text\r\n        },\r\n        ticks: {\r\n          callback: function(value) {\r\n            return '$' + value.toFixed(2);\r\n          },\r\n          color: colors.text\r\n        },\r\n        grid: {\r\n          color: colors.border\r\n        }\r\n      },\r\n      x: {\r\n        title: {\r\n          display: true,\r\n          text: 'Date',\r\n          color: colors.text\r\n        },\r\n        ticks: {\r\n          color: colors.text\r\n        },\r\n        grid: {\r\n          color: colors.border\r\n        }\r\n      }\r\n    },\r\n    onClick: (event, elements) => {\r\n      if (elements.length > 0) {\r\n        const dataIndex = elements[0].index;\r\n        const datasetIndex = elements[0].datasetIndex;\r\n        // We are interested in the data from the 'Close Price' dataset (datasetIndex 0)\r\n        if (datasetIndex === 0 && marketData && marketData.data) {\r\n          const clickedData = marketData.data[dataIndex];\r\n          setSelectedDateData(clickedData);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleQuickSelect = (stockSymbol) => {\r\n    setSymbol(stockSymbol);\r\n    // Submit the form programmatically\r\n    handleSubmitWithSymbol(stockSymbol);\r\n  };\r\n\r\n  const handleSubmitWithSymbol = async (stockSymbol) => {\r\n    if (!stockSymbol.trim()) return;\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await axios.get(`/api/stock-data/${stockSymbol.toUpperCase()}`);\r\n      setMarketData(response.data);\r\n      // Initialize selected data to the latest data point\r\n      if (response.data && response.data.data && response.data.data.length > 0) {\r\n        setSelectedDateData(response.data.data[response.data.data.length - 1]);\r\n      } else {\r\n        setSelectedDateData(null);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching stock data:', err);\r\n      setError(err.response?.data?.error || 'Failed to fetch stock data');\r\n      setMarketData(null);\r\n      setSelectedDateData(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Helper function to calculate price change for a specific date relative to the previous day\r\n  const calculateDailyChange = (selectedData, allData) => {\r\n    if (!selectedData || !allData || allData.length < 2) return null; // Need at least 2 data points to calculate a change\r\n\r\n    const selectedIndex = allData.findIndex(item => item.date === selectedData.date);\r\n\r\n    if (selectedIndex <= 0) return null; // Cannot calculate change if it's the first day or data not found\r\n\r\n    const previousDayData = allData[selectedIndex - 1];\r\n    const currentPrice = parseFloat(selectedData.close);\r\n    const previousClose = parseFloat(previousDayData.close);\r\n\r\n    if (previousClose === 0) return null; // Avoid division by zero\r\n\r\n    const change = currentPrice - previousClose;\r\n    const percentChange = (change / previousClose) * 100;\r\n    const isPositive = change >= 0;\r\n\r\n    return {\r\n      change,\r\n      percentChange,\r\n      isPositive,\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      padding: '20px',\r\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\r\n      color: colors.text,\r\n      backgroundColor: 'transparent'\r\n    }}>\r\n      {/* Popular Stocks Card */}\r\n      <div style={{\r\n        borderRadius: '8px',\r\n        boxShadow: isDarkMode ? '0 1px 3px rgba(0,0,0,0.3)' : '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)',\r\n        overflow: 'hidden',\r\n        marginBottom: '1rem',\r\n        backgroundColor: colors.background\r\n      }}>\r\n        <div style={{\r\n          padding: '1rem',\r\n          borderBottom: `1px solid ${colors.border}`,\r\n          backgroundColor: colors.cardHeaderBackground\r\n        }}>\r\n          <h3 style={{\r\n            margin: '0 0 0 0',\r\n            fontSize: '1.5rem',\r\n            fontWeight: '600',\r\n            color: colors.text\r\n          }}>Popular Stocks</h3>\r\n          <p style={{\r\n            margin: '0',\r\n            fontSize: '0.875rem',\r\n            color: colors.mutedText\r\n          }}>Quick select or view summary data</p>\r\n        </div>\r\n        <div style={{ padding: '1rem', backgroundColor: colors.cardBackground }}>\r\n          {popularStocksLoading && <p style={{color: colors.mutedText}}>Loading popular stock summaries...</p>}\r\n          {popularStocksError && <p style={{color: colors.dangerText}}>{popularStocksError}</p>}\r\n          {!popularStocksLoading && !popularStocksError && (\r\n            <div style={{\r\n              display: 'grid',\r\n              gridTemplateColumns: 'repeat(auto-fill, minmax(180px, 1fr))',\r\n              gap: '1rem'\r\n            }}>\r\n              {popularStockDetails.map(detail => (\r\n                <button\r\n                  key={detail.symbol}\r\n                  onClick={() => handleQuickSelect(detail.symbol)}\r\n                  disabled={loading} // Disable if main chart is loading\r\n                  style={{\r\n                    padding: '1rem',\r\n                    border: `1px solid ${colors.border}`,\r\n                    borderRadius: '8px',\r\n                    backgroundColor: colors.cardBackground,\r\n                    textAlign: 'left',\r\n                    cursor: loading ? 'not-allowed' : 'pointer',\r\n                    opacity: loading ? '0.65' : '1',\r\n                    boxShadow: isDarkMode ? '0 2px 4px rgba(0,0,0,0.25)' : '0 2px 4px rgba(0,0,0,0.1)',\r\n                    transition: 'transform 0.2s ease, box-shadow 0.2s ease',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    justifyContent: 'space-between',\r\n                    minHeight: '100px', // Ensure cards have a consistent minimum height\r\n                  }}\r\n                  onMouseOver={(e) => {\r\n                    if (!loading) {\r\n                      e.currentTarget.style.transform = 'translateY(-3px)';\r\n                      e.currentTarget.style.boxShadow = isDarkMode ? '0 5px 10px rgba(0,0,0,0.35)' : '0 5px 10px rgba(0,0,0,0.15)';\r\n                    }\r\n                  }}\r\n                  onMouseOut={(e) => {\r\n                    e.currentTarget.style.transform = 'none';\r\n                    e.currentTarget.style.boxShadow = isDarkMode ? '0 2px 4px rgba(0,0,0,0.25)' : '0 2px 4px rgba(0,0,0,0.1)';\r\n                  }}\r\n                >\r\n                  <div>\r\n                    <div style={{ fontSize: '0.8rem', color: colors.mutedText, marginBottom: '0.25rem' }}>{detail.symbol}</div>\r\n                    <div style={{ fontSize: '1rem', fontWeight: '600', color: colors.text, marginBottom: '0.35rem',  whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>\r\n                      {detail.name}\r\n                    </div>\r\n                  </div>\r\n                  {detail.error === true && <div style={{ fontSize: '0.8rem', color: colors.dangerText, marginTop: 'auto' }}>Error loading data</div>}\r\n                  {typeof detail.error === 'string' && <div style={{ fontSize: '0.8rem', color: colors.mutedText, marginTop: 'auto' }}>{detail.error}</div>}\r\n\r\n                  {!detail.error && detail.currentPrice !== null && (\r\n                    <div style={{marginTop: 'auto'}}>\r\n                      <div style={{ fontSize: '1.1rem', fontWeight: 'bold', color: colors.text, marginBottom: '0.25rem' }}>\r\n                        ${detail.currentPrice.toFixed(2)}\r\n                      </div>\r\n                      {detail.change !== null && detail.percentChange !== null && detail.isPositive !== null ? (\r\n                        <div style={{ fontSize: '0.8rem', fontWeight: 500, color: detail.isPositive ? colors.successText : colors.dangerText }}>\r\n                          {detail.isPositive ? '▲' : '▼'} {Math.abs(detail.change).toFixed(2)} ({Math.abs(detail.percentChange).toFixed(2)}%)\r\n                        </div>\r\n                      ) : (\r\n                        <div style={{ fontSize: '0.8rem', color: colors.mutedText }}>N/A</div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                   {!detail.error && detail.currentPrice === null && <div style={{ fontSize: '0.8rem', color: colors.mutedText, marginTop: 'auto' }}>Data unavailable</div>}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Stock Data Card */}\r\n      <div style={{\r\n        borderRadius: '8px',\r\n        boxShadow: isDarkMode ? '0 1px 3px rgba(0,0,0,0.3)' : '0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)',\r\n        overflow: 'hidden',\r\n        marginBottom: '1rem',\r\n        backgroundColor: colors.background\r\n      }}>\r\n        <div style={{\r\n          padding: '1rem',\r\n          borderBottom: `1px solid ${colors.border}`,\r\n          backgroundColor: colors.cardHeaderBackground\r\n        }}>\r\n          <h2 style={{\r\n            margin: '0 0 0 0',\r\n            fontSize: '1.5rem',\r\n            fontWeight: '600',\r\n            color: colors.text\r\n          }}>Stock Market Data</h2>\r\n          <p style={{\r\n            margin: '0',\r\n            fontSize: '0.875rem',\r\n            color: colors.mutedText\r\n          }}>Enter a symbol to view historical market data</p>\r\n        </div>\r\n        {/* Main Card Body */}\r\n        <div style={{\r\n          padding: '1rem',\r\n          backgroundColor: colors.cardBackground,\r\n          // Removed flex and gap from here, children will stack naturally\r\n        }}>\r\n          {/* Search form */}\r\n          <form onSubmit={handleSubmit} style={{\r\n            display: 'flex',\r\n            gap: '0.5rem',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Enter stock symbol (e.g., AAPL)\"\r\n              value={symbol}\r\n              onChange={(e) => setSymbol(e.target.value)}\r\n              style={{ \r\n                flex: '1',\r\n                padding: '0.5rem 0.75rem',\r\n                fontSize: '1rem',\r\n                borderRadius: '4px',\r\n                border: `1px solid ${colors.border}`,\r\n                outline: 'none',\r\n                backgroundColor: isDarkMode ? '#3f3f46' : '#fff',\r\n                color: colors.text\r\n              }}\r\n            />\r\n            <button \r\n              type=\"submit\" \r\n              style={{ \r\n                padding: '0.5rem 1rem',\r\n                backgroundColor: loading ? (isDarkMode ? '#52525b' : '#6c757d') : colors.primary,\r\n                color: colors.buttonText,\r\n                border: 'none',\r\n                borderRadius: '4px',\r\n                fontSize: '1rem',\r\n                cursor: loading ? 'not-allowed' : 'pointer',\r\n                opacity: loading ? '0.65' : '1'\r\n              }}\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'Loading...' : 'Get Data'}\r\n            </button>\r\n          </form>\r\n\r\n          {/* Error message display */}\r\n          {error && (\r\n            <div style={{ \r\n              backgroundColor: isDarkMode ? 'rgba(248, 113, 113, 0.1)' : 'rgba(239, 68, 68, 0.1)', \r\n              color: colors.dangerText,\r\n              borderRadius: '4px',\r\n              padding: '0.75rem 1rem',\r\n              marginBottom: '1rem'\r\n            }}>\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {/* Container for Chart and Latest Data (Flex Row) */}\r\n          {marketData && marketData.data && marketData.data.length > 0 && (\r\n            <div style={{\r\n              display: 'flex', // Arrange children (chart and data) in a row\r\n              width: '100%' // Ensure this container takes full width of parent\r\n            }}>\r\n              {/* Chart Container (80%) */}\r\n              <div style={{\r\n                width: '80%', \r\n                flex: '0 0 80%', \r\n              }}>\r\n                <Line data={chartData} options={chartOptions} />\r\n              </div>\r\n\r\n              {/* Latest Data Column (20%) */}\r\n              {selectedDateData && (\r\n                <div style={{\r\n                  width: '20%', \r\n                  flex: '0 0 20%', \r\n                  display: 'flex',\r\n                  flexDirection: 'column',\r\n                  gap: '0.5rem',\r\n                  padding: '0 0 0 1rem', // Add padding on the left to separate from chart\r\n                  height: '100%', // Maximize height\r\n                }}>\r\n                  {/* Latest Data Header */}\r\n                  <h3 style={{\r\n                    margin: '0 0 0.5rem 0',\r\n                    fontSize: '1rem',\r\n                    fontWeight: '600',\r\n                    color: colors.text\r\n                  }}>Latest Data ({selectedDateData.date})</h3>\r\n\r\n                  {/* Price Change Display - Now dynamic based on selected date */}\r\n                  {/* Use the helper function to calculate change for the selected date */}\r\n                  {selectedDateData && marketData && marketData.data && calculateDailyChange(selectedDateData, marketData.data) && (\r\n                    (() => {\r\n                      const dailyChange = calculateDailyChange(selectedDateData, marketData.data);\r\n                      if (!dailyChange) return null; // Ensure dailyChange is valid before rendering\r\n                      return (\r\n                        <div style={{\r\n                          textAlign: 'center',\r\n                          marginBottom: '1rem', // Keep some margin below the change\r\n                          // Removed background and padding styles that were for the standalone card\r\n                        }}>\r\n                          <span style={{\r\n                            display: 'inline-block',\r\n                            padding: '0.5rem 1rem',\r\n                            borderRadius: '4px',\r\n                            backgroundColor: dailyChange.isPositive \r\n                              ? (isDarkMode ? 'rgba(74, 222, 128, 0.1)' : 'rgba(34, 197, 94, 0.1)') \r\n                              : (isDarkMode ? 'rgba(248, 113, 113, 0.1)' : 'rgba(239, 68, 68, 0.1)'),\r\n                            color: dailyChange.isPositive ? colors.successText : colors.dangerText,\r\n                            fontWeight: 500\r\n                          }}>\r\n                            {dailyChange.isPositive ? '↑' : '↓'} ${Math.abs(dailyChange.change).toFixed(2)} ({dailyChange.percentChange.toFixed(2)}%)\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    })()\r\n                  )}\r\n\r\n                  {/* Individual Data Points */}\r\n                  <div style={{ \r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: '0.5rem',\r\n                    overflowY: 'auto',\r\n                  }}>\r\n                    {/* Open */}\r\n                    <div style={{ \r\n                      borderRadius: '4px',\r\n                      backgroundColor: colors.cardBackground,\r\n                      border: `1px solid ${colors.border}`,\r\n                      padding: '0.4rem 0.6rem',\r\n                      textAlign: 'center',\r\n                      flex: '0 0 auto',\r\n                      minWidth: 'auto',\r\n                      width: '100%'\r\n                    }}>\r\n                      <div style={{ fontSize: '0.75rem', color: colors.mutedText, marginBottom: '0.1rem' }}>Open</div>\r\n                      <div style={{ fontSize: '1rem', fontWeight: 600, color: colors.text }}>${Number(selectedDateData.open).toFixed(2)}</div>\r\n                    </div>\r\n                    {/* Close */}\r\n                    <div style={{ \r\n                      borderRadius: '4px',\r\n                      backgroundColor: colors.cardBackground,\r\n                      border: `1px solid ${colors.border}`,\r\n                      padding: '0.4rem 0.6rem',\r\n                      textAlign: 'center',\r\n                      flex: '0 0 auto',\r\n                      minWidth: 'auto',\r\n                      width: '100%'\r\n                    }}>\r\n                      <div style={{ fontSize: '0.75rem', color: colors.mutedText, marginBottom: '0.1rem' }}>Close</div>\r\n                      <div style={{ fontSize: '1rem', fontWeight: 600, color: colors.text }}>${Number(selectedDateData.close).toFixed(2)}</div>\r\n                    </div>\r\n                    {/* High */}\r\n                    <div style={{ \r\n                      borderRadius: '4px',\r\n                      backgroundColor: colors.cardBackground,\r\n                      border: `1px solid ${colors.border}`,\r\n                      padding: '0.4rem 0.6rem',\r\n                      textAlign: 'center',\r\n                      flex: '0 0 auto',\r\n                      minWidth: 'auto',\r\n                      width: '100%'\r\n                    }}>\r\n                      <div style={{ fontSize: '0.75rem', color: colors.mutedText, marginBottom: '0.1rem' }}>High</div>\r\n                      <div style={{ fontSize: '1rem', fontWeight: 600, color: colors.text }}>${Number(selectedDateData.high).toFixed(2)}</div>\r\n                    </div>\r\n                    {/* Low */}\r\n                    <div style={{ \r\n                      borderRadius: '4px',\r\n                      backgroundColor: colors.cardBackground,\r\n                      border: `1px solid ${colors.border}`,\r\n                      padding: '0.4rem 0.6rem',\r\n                      textAlign: 'center',\r\n                      flex: '0 0 auto',\r\n                      minWidth: 'auto',\r\n                      width: '100%'\r\n                    }}>\r\n                      <div style={{ fontSize: '0.75rem', color: colors.mutedText, marginBottom: '0.1rem' }}>Low</div>\r\n                      <div style={{ fontSize: '1rem', fontWeight: 600, color: colors.text }}>${Number(selectedDateData.low).toFixed(2)}</div>\r\n                    </div>\r\n                    {/* Volume */}\r\n                    <div style={{ \r\n                      borderRadius: '4px',\r\n                      backgroundColor: colors.cardBackground,\r\n                      border: `1px solid ${colors.border}`,\r\n                      padding: '0.4rem 0.6rem',\r\n                      textAlign: 'center',\r\n                      flex: '0 0 auto',\r\n                      minWidth: 'auto',\r\n                      width: '100%'\r\n                    }}>\r\n                      <div style={{ fontSize: '0.75rem', color: colors.mutedText, marginBottom: '0.1rem' }}>Volume</div>\r\n                      <div style={{ fontSize: '1rem', fontWeight: 600, color: colors.text }}>{Number(selectedDateData.volume).toLocaleString()}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StockChart; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}